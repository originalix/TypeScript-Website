(self.webpackChunktypescriptlang_org=self.webpackChunktypescriptlang_org||[]).push([[530],{7160:function(e,t,n){"use strict";n.d(t,{W:function(){return l}});var r=n(2784),a=n.n(r),i=n(5572),l=function(e){var t=e.children,n=e.hideOnTouch;return(0,r.useEffect)((function(){if((0,i.b)()){for(var e=document.getElementById("touch-suppressible");e.firstChild;)e.removeChild(e.firstChild);if(n)return;var t=document.createElement("h4");t.textContent="Section best on a computer";var r=document.createElement("p");r.textContent="This part of the site does not run well on a touch-oriented browser. We recommend switching to a computer to carry on.",e.appendChild(t),e.appendChild(r)}}),[]),a().createElement("div",{id:"touch-suppressible"},t)}},2125:function(e,t,n){"use strict";n.d(t,{X:function(){return i}});var r=n(2784),a=n(8447),i=function(e){var t=function(t){return e.active&&e.active.toLowerCase()===t?"active":""};return r.createElement("nav",{className:"navbar-sub dev-tools"},r.createElement("ul",{className:"nav"},r.createElement("li",{className:"name"},r.createElement("h3",null,"Developer Tools")),r.createElement("li",{style:{display:"none"}},r.createElement("a",{className:t("compiler api"),href:(0,a.withPrefix)("/dev/compiler")},"Compiler API")),r.createElement("li",null,r.createElement("a",{className:t("sandbox"),href:(0,a.withPrefix)("/dev/sandbox")},"Sandbox")),r.createElement("li",null,r.createElement("a",{className:t("twoslash"),href:(0,a.withPrefix)("/dev/twoslash")},"Twoslash")),r.createElement("li",null,r.createElement("a",{className:t("typescript vfs"),href:(0,a.withPrefix)("/dev/typescript-vfs")},"TypeScript VFS")),r.createElement("li",null,r.createElement("a",{className:t("playground plugins"),href:(0,a.withPrefix)("/dev/playground-plugins")},"Playground Plugins")),r.createElement("li",null,r.createElement("a",{className:t("bug workbench"),href:(0,a.withPrefix)("/dev/bug-workbench")},"Bug Workbench"))))}},5572:function(e,t,n){"use strict";function r(){var e=!1;if("maxTouchPoints"in navigator)e=navigator.maxTouchPoints>0;else if("msMaxTouchPoints"in navigator)e=navigator.msMaxTouchPoints>0;else{var t="undefined"!=typeof window&&window.matchMedia&&matchMedia("(pointer:coarse)");if(t&&"(pointer:coarse)"===t.media)e=!!t.matches;else if("orientation"in window)e=!0;else{var n=navigator.userAgent;e=/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(n)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(n)}}return e}n.d(t,{b:function(){return r}})},3555:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var r=n(7575),a=n(7183),i=n.n(a),l=n(2784),o=n.n(l),s=n(7480),c=n(8447),d=n(2057),u=n(3415),p=n(660);function m(e,t,n){void 0===n&&(n="");var r=[],a=!1;e.forEach((function(e){if("lsp"===e.classes){var t=e.lsp===n?"style=⇯border-bottom: solid 2px lightgrey;⇯":"";r.push({text:"⇍/data-lsp⇏",index:e.end}),r.push({text:"⇍data-lsp lsp=⇯"+(e.lsp||"")+"⇯ "+t+"⇏",index:e.begin})}else"err"===e.classes?a=!0:"query"===e.classes&&(r.push({text:"⇍/data-highlight⇏",index:e.end}),r.push({text:"⇍data-highlight'⇏",index:e.begin}))}));var i=(" "+t).slice(1);return r.sort((function(e,t){return t.index-e.index})).forEach((function(e){var t,n,r,a;t=i,n=e.index,r=0,a=e.text,i=t.slice(0,n)+a+t.slice(n+Math.abs(r))})),a&&(i="⇍data-err⇏"+i+"⇍/data-err⇏"),h(f(i))}var h=function(e){return e.replace(/⇍/g,"<").replace(/⇏/g,">").replace(/⇯/g,"'")};function f(e){var t={"<":"lt",'"':"quot","'":"apos","&":"amp","\r":"#10","\n":"#13"};return e.toString().replace(/[<"'\r\n&]/g,(function(e){return"&"+t[e]+";"}))}function g(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;")}n(2332);function v(e,t,n,r){var a,i="",l=(a=r,!!Object.keys(a).find((function(e){return!!e.includes("-")||NaN!==parseInt(e)}))),o=function(e){var t=[];return Object.keys(e).find((function(e){if(NaN!==parseInt(e)&&t.push(parseInt(e)),e.includes("-"))for(var n=e.split("-"),r=n[0],a=n[1],i=parseInt(a)+1,l=parseInt(r);l<i;l++)t.push(l)})),function(e){return t.includes(e)}}(r),s=t.bg||"#fff",c=t.fg||"black",d=r.class||"";i+='<pre class="shiki twoslash lsp '+d+'" style="background-color: '+s+"; color: "+c+'">',t.langId&&(i+='<div class="language-id">'+t.langId+"</div>"),i+="<div class='code-container'><code>";var u,h=b(n.errors,(function(e){return e.line}))||new Map,v=b(n.staticQuickInfos,(function(e){return e.line}))||new Map,E=b(n.queries,(function(e){return e.line-1}))||new Map,w=0;e.forEach((function(e,t){var n=h.get(t)||[],r=v.get(t)||[],a=E.get(t)||[];if(0===e.length&&0===t)w+=1;else if(0===e.length)w+=1,i+="\n";else{var s=l?o(t)?" highlight":" dim":"";i+="<div class='line"+s+"'>";var c=0;e.forEach((function(e){var t,l="",o=function(t){return function(n){return t<=n.character&&t+e.content.length>=n.character+n.length}},s=n.filter(o(c)),d=r.filter(o(c)),u=a.filter(o(c));t||(t=d.find((function(e){return e.text===(a.length&&a[0].text)})));var h,g=[].concat((0,p.Z)(s),(0,p.Z)(d),(0,p.Z)(u)).sort((function(e,t){return(e.start||0)-(t.start||0)}));g.length?l+=m(g.map((function(e){var t={begin:e.start-w,end:e.start+e.length-w};return t.begin<0||t.end,"renderedMessage"in e&&(t.classes="err"),"kind"in e&&(t.classes=e.kind),"targetString"in e&&(t.classes="lsp",t.lsp=f(e.text)),t})),e.content,null===(h=t)||void 0===h?void 0:h.text):l+=e.content.replace(/</g,"⇍").replace(/>/g,"⇏").replace(/'/g,"⇯");i+='<span style="color: '+e.color+'">'+l+"</span>",c+=e.content.length,w+=e.content.length})),i+="</div>",w+=1}if(n.length){var d=n.map((function(e){return g(e.renderedMessage)})).join("</br>"),u=n.map((function(e){return e.code})).join("<br/>");i+='<span class="error"><span>'+d+'</span><span class="code">'+u+"</span></span>",i+='<span class="error-behind">'+d+"</span>"}a.length&&(a.forEach((function(e){switch(e.kind){case"query":var n=g(e.text),r=(v.get(t)||[]).find((function(e){return e.text===(a.length&&a[0].text)})),l=(r&&r.character+(null==r?void 0:r.length)/2)-1||0;i+="<span class='popover-prefix'>"+" ".repeat(l)+"</span><span class='popover'><div class='arrow'></div>"+n+"</span>";break;case"completions":if(e.completions){var o=e.completions.filter((function(t){return t.name.startsWith(e.completionsPrefix||"____")})).sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(t){var n,r,a=t.name.substr((null===(n=e.completionsPrefix)||void 0===n?void 0:n.length)||0),i="<span><span class='result-found'>"+(e.completionsPrefix||"")+"</span>"+a+"<span>";return"<li class='"+((null===(r=t.kindModifiers)||void 0===r?void 0:r.split(",").includes("deprecated"))?"deprecated":"")+"'>"+i+"</li>"})).join("");i+="".padStart(e.offset)+"<span class='inline-completions'><ul class='dropdown'>"+o+"</ul></span>"}else i+="<span class='query'>//"+"".padStart(e.offset-2)+"^ - No completions found</span>"}})),i+="\n")})),u=i.replace(/\n*$/,""),i=u.replace(/⇍/g,"&lt;").replace(/⇏/g,"&gt;").replace(/⇯/g,"&apos;");var y="<a href='"+n.playgroundURL+"'>Try</a>";return i+="</code>"+y+"</div></pre>"}function b(e,t){var n=new Map;return e.forEach((function(e){var r=t(e),a=n.get(r);a?a.push(e):n.set(r,[e])})),n}var E=n(6705),w=n(7054),y=n(2125),x=n(5572),T=n(7160),S=n(2332),k=function(e){return(0,l.useEffect)((function(){if(!(0,x.b)()){var e=document.createElement("script");e.src=(0,c.withPrefix)("/js/vs.loader.js"),e.async=!0,e.onload=function(){var e=n.g.require;e.config({paths:{vs:"https://typescript.azureedge.net/cdn/4.0.5/monaco/min/vs",sandbox:(0,c.withPrefix)("/js/sandbox")},ignoreDuplicateModules:["vs/editor/editor.main"]}),e(["vs/editor/editor.main","vs/language/typescript/tsWorker","sandbox/index"],function(){var t=(0,r.Z)(i().mark((function t(a,l,o){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(["vs/language/typescript/lib/typescriptServices"],function(){var e=(0,r.Z)(i().mark((function e(t){var r,l,s,c,p,m;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.g.ts,a&&r&&o?null===(l=document.getElementById("loader").parentNode)||void 0===l||l.removeChild(document.getElementById("loader")):S.error("Error: main",!!a,"ts",!!r,"sandbox",!!o),document.getElementById("monaco-editor-embed").style.display="block",e.next=6,o.createTypeScriptSandbox({text:N[0].code,compilerOptions:{},domID:"monaco-editor-embed",supportTwoslashCompilerOptions:!0},a,r);case 6:return(s=e.sent).editor.focus(),window.sandbox=s,e.next=11,(0,u.yp)({target:3},"3.7.3",!0,r,s.lzstring);case 11:c=e.sent,p=function(){var e=s.getText();c.set("index.ts",e);try{var t=(0,d.k)(e,"tsx",{tsModule:r,lzstringModule:s.lzstring,fsMap:c}),n=v(t.code.split("\n").map((function(e){return[{content:e}]})),{},t,{}),a=document.getElementById("twoslash-results");for(document.getElementById("twoslash-failure").style.display="none",document.getElementById("twoslash-results").innerHTML=n;a.firstChild;)a.removeChild(a.firstChild);var i=document.createElement("p");i.innerText=t.extension,i.className="extension";var l=document.createElement("div");l.innerHTML=n;var o=document.createElement("a");o.innerText="Playground",o.href=t.playgroundURL,a.appendChild(i),a.appendChild(l),a.appendChild(o)}catch(b){var u=b,p=document.getElementById("twoslash-failure");if(!p)return;for(p.style.display="block";p.firstChild;)p.removeChild(p.firstChild);var m=document.createElement("div");m.className="err-content";var h=document.createElement("h3");h.textContent="Exception Raised";var f=document.createElement("p"),g=u.name.startsWith("Error")?u.name.split("Error")[1]:u.name;f.textContent=g+u.message.split("## Code")[0],m.appendChild(h),m.appendChild(f),p.appendChild(m),S.log(b)}},m=(0,E.D)(p,500),s.editor.onDidChangeModelContent(m),p(),setTimeout((function(){document.querySelectorAll("#example-buttons .disabled").forEach((function(e){e.classList.remove("disabled")})),document.querySelectorAll(".html-code").forEach((function(e){s.monaco.editor.colorize(e.textContent||"","html",{tabSize:2}).then((function(t){e.innerHTML=t}))})),document.querySelectorAll(".ts-code").forEach((function(e){s.monaco.editor.colorize(e.textContent||"","typescript",{tabSize:2}).then((function(t){e.innerHTML=t}))}))}),300);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}())},document.body.appendChild(e)}}),[]),o().createElement(o().Fragment,null,o().createElement(s.A,{title:"Developers - Twoslash Code Samples",description:"Learn about the TypeScript code sample library twoslash. Used for transpiling, providing hover to identifiers and compiler-driven error states.",lang:"en"},o().createElement("div",{id:"dev"},o().createElement(y.X,{active:"twoslash"}),o().createElement("div",{className:"raised content main-content-block"},o().createElement("div",{className:"split-fifty"},o().createElement("div",null,o().createElement("h1",{style:{marginTop:"20px"}},"TypeScript Twoslash"),o().createElement("p",null,"A markup format for TypeScript code, ideal for creating self-contained code samples which let the TypeScript compiler do the extra leg-work."),o().createElement("p",null,"If you know TypeScript, you basically know twoslash."),o().createElement("p",null,"Twoslash adds the ability to declare tsconfig options inline, split a sample into multiple files and a few other useful commands. You can see the full API"," ",o().createElement("a",{href:"https://github.com/microsoft/TypeScript-Website/tree/v2/packages/ts-twoslasher"},"inside the README"))),o().createElement("div",{style:{paddingTop:"4.5rem"}},o().createElement("p",null,"The Twoslash markup language helps with:"),o().createElement("ul",null,o().createElement("li",null,"Enforcing accurate errors from a TypeScript code sample, and leaving the messaging to the compiler"),o().createElement("li",null,"Splitting a code sample to hide distracting code"),o().createElement("li",null,"Declaratively highlighting symbols in your code sample"),o().createElement("li",null,"Replacing code with the results of transpilation to different files, or ancillary files like .d.ts or .map files"),o().createElement("li",null,"Handle multi-file imports in a single code sample"),o().createElement("li",null,"Creating a playground link for the code"))))),o().createElement("div",{className:"raised content main-content-block",style:{maxWidth:"90%"}},o().createElement("div",{className:"fivehundred",style:{flex:1}},o().createElement(T.W,null,o().createElement("h3",{style:{marginTop:"0"}},"Markup"),o().createElement("p",{id:"exampleBlurb"},N[0].blurb),o().createElement("div",{id:"loader"},o().createElement("div",{className:"lds-grid"},o().createElement("div",null),o().createElement("div",null),o().createElement("div",null),o().createElement("div",null),o().createElement("div",null),o().createElement("div",null),o().createElement("div",null),o().createElement("div",null),o().createElement("div",null)),o().createElement("p",{id:"loading-message",role:"status"},"Downloading Sandbox...")),o().createElement("div",{style:{height:"300px",display:"none"},id:"monaco-editor-embed"}),o().createElement("div",{id:"example-buttons"},N.map((function(e){return o().createElement("div",{className:"button disabled",onClick:function(t){t.target.classList.contains("disabled")||(document.getElementById("exampleBlurb").innerText=e.blurb,window.sandbox.setText(e.code))}},e.name)}))))),o().createElement("div",{style:{paddingLeft:"20px",borderLeft:"1px solid gray",position:"relative",flex:1,overflow:"auto"}},o().createElement(T.W,null,o().createElement("h3",{style:{marginTop:"0"}},"Results"),o().createElement("div",{id:"twoslash-results"}),o().createElement("div",{id:"twoslash-failure"})))),o().createElement("div",{className:"raised main-content-block"},o().createElement("h2",null,"Usage"),o().createElement("p",null,"Twoslash's usage guide is available on the npm README at"," ",o().createElement("a",{href:"https://www.npmjs.com/package/@typescript/twoslash"},o().createElement("code",null,"@typescript/twoslash")),".")))))},C=function(e){return o().createElement(w.R,{locale:"en"},o().createElement(k,e))},N=[{name:"Highlights runtime types",blurb:"See how TS Twoslash will grab the highlight information for identifiers in your code",code:"// @errors: 2532\ndeclare const quantumString: string | undefined;\n\n// Right now this string is in two states, hover below to see\nquantumString\n  \nif (quantumString) {\n  // However, in here we now have a different type\n  // you can verify by hovering below\n  quantumString.length;\n}\n    "},{name:"Show Errors",blurb:"Twoslash will help highlight compiler error messages",code:"// @errors: 7006\nfunction fn(s) {\n  console.log(s.subtr(3))\n}\n\nfn(42)"},{name:"Set Compiler Flags",blurb:"You can define compiler flags inline in a code sample which are removed from the output",code:"// @noImplicitAny: false\n// This will not throw because of the noImplicitAny\nfunction fn(s) {\n  console.log(s.subtr(3))\n}\n\nfn(42);"},{name:"Trims code",blurb:"You can write code to help it compile in the sample which is hidden in the output",code:'interface IdLabel {id: number, /* some fields */ }\ninterface NameLabel {name: string, /* other fields */ }\ntype NameOrId<T extends number | string> = T extends number ? IdLabel : NameLabel;\n// This comment should not be included\n\n// ---cut---\nfunction createLabel<T extends number | string>(idOrName: T): NameOrId<T> {\n  throw "unimplemented"\n}\n\nlet a = createLabel("typescript");'},{name:"Show the JS",blurb:"Use @showEmit to show the JS files",code:"// @showEmit\nexport function getStringLength(value: string) {\n  return value\n}\n"},{name:"Show the DTS",blurb:"Use @showEmittedFile to set the d.ts file to be the result code",code:"// @declaration: true\n// @showEmit\n// @showEmittedFile: index.d.ts\n/**\n * Gets the length of a string\n * @param value a string\n */\nexport function getStringLength(value: string) {\n  return value\n}\n"},{name:"Highlights",blurb:"Highlight some code in the editor",code:'function greet(person: string, date: Date) {\n  console.log(`Hello ${person}, today is ${date.toDateString()}!`);\n}\n\ngreet("Maddison", new Date());\n//                ^^^^^^^^^^\n'}]}}]);
//# sourceMappingURL=component---src-pages-dev-twoslash-tsx-96756a653e8d2df72b86.js.map